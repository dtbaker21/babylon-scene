<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Chair Viewer</title>
    <style>
        html, body {
            overflow: hidden;
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            outline: none !important;
            border: none !important;
            position: fixed;
            -webkit-overflow-scrolling: touch;
        }
        
        * {
            outline: none !important;
            border: none !important;
        }
        
        *:focus {
            outline: none !important;
            border: none !important;
        }
        
        #renderCanvas {
            width: 100%;
            height: 100%;
            touch-action: none;
            cursor: grab;
            outline: none !important;
            border: none !important;
            display: block;
        }
        
        #renderCanvas:active {
            cursor: grabbing;
        }
        
        #renderCanvas:focus {
            outline: none !important;
            border: none !important;
        }
    </style>
    <script src="https://cdn.babylonjs.com/babylon.js"></script>
    <script src="https://cdn.babylonjs.com/loaders/babylonjs.loaders.min.js"></script>
</head>
<body>
    <canvas id="renderCanvas"></canvas>
    <script>
        const canvas = document.getElementById("renderCanvas");
        const engine = new BABYLON.Engine(canvas, true);
        
        var createScene = function () {
            var scene = new BABYLON.Scene(engine);
            
            // Disable hardware scaling for worse aliasing
            engine.setHardwareScalingLevel(1);
            
        //----CAMERA SETUP-----------------------
            
            var cameraDistance = 5;
            var cameraTargetHeight = 0.45;
            var finalAlpha = -2;
            var finalBeta = 1.38;
            var startAlpha = finalAlpha + 1.2;
            var startBeta = finalBeta - 0.4;
            
            var camera = new BABYLON.ArcRotateCamera("Camera", startAlpha, startBeta, cameraDistance, BABYLON.Vector3(0,0,0), scene);
            camera.attachControl(canvas, true);
            camera.wheelPrecision = 40;
            camera.setTarget(new BABYLON.Vector3(0, cameraTargetHeight, 0));
            camera.panningSensibility = 0;
            camera.pinchDeltaPercentage = 0.01;
            camera.fov = .3;
            camera.upperRadiusLimit = 7;
            camera.lowerRadiusLimit = 1.7;
            
            // Animate camera rotation on load
            var animateCameraIn = function() {
                var animationDuration = 2000;
                var startTime = performance.now();
                
                var animate = function() {
                    var elapsed = performance.now() - startTime;
                    var progress = Math.min(elapsed / animationDuration, 1);
                    
                    var eased = progress < 0.5 
                        ? 2 * progress * progress 
                        : 1 - Math.pow(-2 * progress + 2, 2) / 2;
                    
                    camera.alpha = startAlpha + (finalAlpha - startAlpha) * eased;
                    camera.beta = startBeta + (finalBeta - startBeta) * eased;
                    
                    if (progress < 1) {
                        requestAnimationFrame(animate);
                    }
                };
                
                animate();
            };

        //----HDRI TEXTURE------------------------

            var hdrTexture = BABYLON.CubeTexture.CreateFromPrefilteredData("https://assets.babylonjs.com/environments/studio.env", scene);
            scene.environmentTexture = hdrTexture;
            scene.environmentIntensity = 1.2;

        //----SIMPLE CUBE INSTEAD OF CHAIR-------

            // Create a simple cube
            var box = BABYLON.MeshBuilder.CreateBox("box", {size: 1}, scene);
            box.position.y = 0.5; // Lift it up so it sits on the "ground"
            
            // Give it a simple material
            var boxMaterial = new BABYLON.StandardMaterial("boxMat", scene);
            boxMaterial.diffuseColor = new BABYLON.Color3(0.8, 0.6, 0.4); // Tan color
            boxMaterial.specularColor = new BABYLON.Color3(0.3, 0.3, 0.3);
            box.material = boxMaterial;
            
            // Start camera animation
            animateCameraIn();
            
            console.log("Cube created successfully");

        //----BACKGROUND SETUP--------------------

            // Transparent background
            scene.clearColor = new BABYLON.Color4(0, 0, 0, 0);

            // Invisible ground (no shadow reception)
            var ground = BABYLON.Mesh.CreatePlane('ground', 1000, scene);
            ground.rotation.x = Math.PI / 2;
            ground.isVisible = false;

            return scene;

        };
        
        const scene = createScene();
        
        engine.runRenderLoop(function () {
            scene.render();
        });
        
        window.addEventListener("resize", function () {
            engine.resize();
        });
        
        // Prevent page scroll when mouse wheel over canvas
        canvas.addEventListener('wheel', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        // Prevent page zoom/scroll when pinch-to-zoom on trackpad
        canvas.addEventListener('gesturestart', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        canvas.addEventListener('gesturechange', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        canvas.addEventListener('gestureend', function(e) {
            e.preventDefault();
        }, { passive: false });
        
        // Prevent touchpad pinch zoom
        canvas.addEventListener('touchmove', function(e) {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
